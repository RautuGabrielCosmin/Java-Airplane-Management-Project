<!--
https://logback.qos.ch/manual/configuration.html
https://www.slf4j.org/manual.html
-->

<configuration scan = "true" scanPeriod = "60 seconds"> <!--sau <configuration debug="true" e echivalent cu StatusListener -->

    <property name = "Logs" value="./Logs"/>

    <statusListener class="ch.qos.logback.core.status.OnConsoleStatusListener" />

        <appender name = "Console" class = "ch.qos.logback.core.ConsoleAppender">
            <layout class = "ch.qos.logback.classic.PatternLayout">
            <encoder>
                <pattern> %X{userId} %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} -%kvp- %msg%n </pattern>
            </encoder>
            </layout>
        </appender>

    <appender name ="RollingFileAppender" class = "ch.qos.logback.core.rolling.RollingFileAppender">

        <file>testFile.log</file>

        <append>true</append>

        <!-- Support multiple-JVM writing to the same log file -->
        <prudent>true</prudent>

        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
        <!-- daily rollover -->
            <fileNamePattern>logFile.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <!-- each file should be at most 100MB, keep 10 days worth of history, but at most 3GB -->
            <maxFileSize>100MB</maxFileSize>
            <maxHistory>10</maxHistory>
            <totalSizeCap>3GB</totalSizeCap>
        </rollingPolicy>

        <!-- set immediateFlush to false for much higher logging throughput -->
        <immediateFlush>true</immediateFlush>

        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%d %p %C{1.} [%t] %m%n</pattern>
        </encoder>

    </appender>

    <root level = "debug">
        <appender-ref ref="Console" />
        <appender-ref ref="RollingFileAppender"/>
    </root>
    <logger name = "" level = "trace" additivity="false">
        <appender-ref ref = "RollingFileAppender"/>
        <appender-ref ref = "Console"/>
    </logger>

</configuration>
